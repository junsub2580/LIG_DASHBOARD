import{_ as M,k as E,ah as S,$ as R,bK as N,a4 as F,l as w,q as $,y as l,e as o,v as s,am as k,t as a,B as v,W as L,x as n,C as T,V as P,ao as H,z as u,bL as U,E as z,G as B,bM as p,n as A,bN as O}from"./index-a104d20c.js";import{_ as D}from"./short_logo-94ea3b9a.js";import{a as y}from"./user.svc-24c3e478.js";import{d as G}from"./dataset.Svc-c38d2df9.js";import{V as W}from"./VCard-99e97b00.js";import{b as g}from"./VTextField-31e7c5f9.js";import"./VInput-d9e8c4f3.js";const I=m=>(z("data-v-1f984f8c"),m=m(),B(),m),j={id:"login"},q={class:"d-flex justify-center align-center",style:{"flex-direction":"column"}},J={class:"d-flex align-center",style:{"flex-direction":"column"}},K={style:{width:"200px"}},Z=I(()=>l("div",{style:{width:"349px"}},null,-1)),Q={class:"container mt-13"},X={class:"outer-circle"},Y={class:"middle-circle"},ee={class:"inner-circle"},se=I(()=>l("p",{style:{color:"#939598","font-weight":"600","font-size":"22px","text-align":"end"}}," LOGIN ",-1)),re=I(()=>l("p",{style:{color:"#939598","font-weight":"600","font-size":"22px","text-align":"end"}}," 사용자등록 ",-1)),te={__name:"Login",setup(m){const{setToken:ie,getToken:oe,showAlert:d,setSecretSession:_,getSecretSession:ae}=E();S();const f={user_id:"",password:"",toggleState:0,visible:!1,loginIdHint:"",loginPwHint:"",registerUserName:"",isRegisterIdCheck:!1,isRegisterPwCheck:!1,registerUserId:"",registerIdErrMsg:"",registerIdPassMsg:"",registerPwErrMsg:"",registerPwPassMsg:"",registerPassword:"",registerCheckPassword:"",registerUserNameErrMsg:""},e=R(f);N.value("rootApi");async function V(){if(e.loginIdHint="",e.loginPwHint="",p(e.user_id)){d("error","계정을 입력하세요.",!0);return}if(p(e.password)){d("error","비밀번호를 입력하세요.",!0);return}y.onLogin(e.user_id,e.password).then(i=>{if(i){if(i.data){const t=i.headers.authorization.replace("Bearer ","");_("token",t),x(),A(),O.push({name:"deliveryStatus"})}if(i.error){const r=i.message;if(d("error",r,!0),r.indexOf("아이디")!==-1){e.loginIdHint=r;return}if(r.indexOf("비밀번호")!==-1){e.loginPwHint=r;return}}}})}function b(){const i=/^[A-Za-z0-9]+$/;if(p(e.registerUserId)){e.registerIdErrMsg="사용할 계정을 입력하세요.";return}if(!i.test(e.registerUserId)){e.registerIdErrMsg="사용할 수 없는 계정 형식입니다.",e.registerUserId="";return}if(e.registerUserId.length<6){e.registerIdErrMsg="계정 길이는 6글자 이상입니다 다시 입력하세요",e.registerUserId="";return}y.checkDuplicateUserId(e.registerUserId).then(r=>{if(r.error){e.registerIdErrMsg=r.message,e.registerUserId="",d("error",r.message,!0);return}e.isRegisterIdCheck=!0,e.registerIdPassMsg=r.data,d("success",r.data,!0)})}function C(){if(p(e.registerUserName)){e.registerUserNameErrMsg="사용자 이름 입력은 필수입니다";return}const i={userName:e.registerUserName,userId:e.registerUserId,password:e.registerPassword};y.registerUser(i).then(r=>{if(r.data)d("success",`성공적으로 회원가입 되었습니다. 
 로그인 화면으로 전환됩니다.`,!0),U(e,f);else{d("error","알 수 없는 에러입니다.",!0);return}}).catch(r=>{console.log(r)})}function x(){G.getUsageList().then(i=>{if(i!=null&&i.data){const r=["환경시제","SIL시제","개발시제","전력화시제#1","전력화시제#2","전력화시제#3","전력화시제#4","전력화시제#5","전력화시제#6","그외"];console.log(i.data);const t=i.data.map(h=>{const c=h.PROJECT_USAGE;return c.includes("시제")?c:`${c}시제`}).filter(h=>r.some(c=>c.includes(h)));console.log(t),_("usage",t)}})}return F(()=>{e.registerIdErrMsg.length>0&&setTimeout(()=>{e.registerIdErrMsg=""},3e3),e.registerUserNameErrMsg>0&&setTimeout(()=>{e.registerUserNameErrMsg=""},3e3),e.registerCheckPassword.length>0?e.registerPassword===e.registerCheckPassword?(e.isRegisterPwCheck=!0,e.registerPwErrMsg="",e.registerPwPassMsg="비밀번호가 일치합니다."):(e.isRegisterPwCheck=!1,e.registerPwErrMsg="비밀번호가 일치하지 않습니다."):(e.registerPwErrMsg="",e.registerPwPassMsg="")}),(i,r)=>(w(),$("div",j,[l("div",q,[l("div",J,[l("div",K,[o(L,{src:D})]),Z]),l("div",Q,[l("div",X,[l("div",Y,[l("div",ee,[s(e).toggleState===0?(w(),k(v,{key:0,size:"44px",color:"#FFFFFF"},{default:a(()=>[n("mdi-account")]),_:1})):(w(),k(v,{key:1,size:"35px",color:"#FFFFFF"},{default:a(()=>[n("mdi-account-plus")]),_:1}))])])]),o(W,{class:"pa-9",elevation:"8",style:{border:"3px solid #06377b","border-radius":"45px"},"max-width":"412px","min-width":"350px",height:"fit-content"},{default:a(()=>[o(T,{modelValue:s(e).toggleState,"onUpdate:modelValue":r[9]||(r[9]=t=>s(e).toggleState=t)},{default:a(()=>[o(P,{class:"py-4",value:0},{default:a(()=>[se,l("form",{onSubmit:H(V,["prevent"])},[o(g,{variant:"outlined","error-messages":s(e).loginIdHint,modelValue:s(e).user_id,"onUpdate:modelValue":r[0]||(r[0]=t=>s(e).user_id=t),autocomplete:"username","prepend-inner-icon":"mdi-email-outline",density:"compact",placeholder:"계정을 입력하세요"},null,8,["error-messages","modelValue"]),o(g,{variant:"outlined","error-messages":s(e).loginPwHint,clearable:"",autocomplete:"current-password",modelValue:s(e).password,"onUpdate:modelValue":r[1]||(r[1]=t=>s(e).password=t),placeholder:"비밀번호를 입력하세요",density:"compact","onClick:appendInner":r[2]||(r[2]=t=>s(e).visible=!s(e).visible),"prepend-inner-icon":"mdi-lock-outline",type:s(e).visible?"text":"password","append-inner-icon":s(e).visible?"mdi-eye-off":"mdi-eye"},null,8,["error-messages","modelValue","type","append-inner-icon"]),o(u,{class:"mt-2",type:"submit",color:"primary",density:"compact",height:"45",style:{width:"100%"}},{default:a(()=>[n(" 로그인 ")]),_:1})],32),o(u,{class:"mt-2",color:"grey",density:"compact",height:"45",style:{width:"100%"},onClick:r[3]||(r[3]=t=>s(e).toggleState=1)},{default:a(()=>[n(" 사용자등록 ")]),_:1})]),_:1}),o(P,{value:1},{default:a(()=>[re,o(g,{variant:"outlined","error-messages":s(e).registerUserNameErrMsg,class:"mt-10 mb-2",clearable:"",modelValue:s(e).registerUserName,"onUpdate:modelValue":r[4]||(r[4]=t=>s(e).registerUserName=t),label:"사용자 이름",density:"compact"},null,8,["error-messages","modelValue"]),o(g,{variant:"outlined",focused:s(e).isRegisterIdCheck,color:s(e).isRegisterIdCheck?"success":"",readonly:s(e).isRegisterIdCheck,messages:s(e).registerIdPassMsg,"error-messages":s(e).registerIdErrMsg,placeholder:"영문, 최소 6자리 이상",class:"mb-2",modelValue:s(e).registerUserId,"onUpdate:modelValue":r[5]||(r[5]=t=>s(e).registerUserId=t),label:"계정",density:"compact"},{append:a(()=>[l("div",null,[o(u,{onClick:b,height:"40",variant:"flat",color:"primary"},{default:a(()=>[n(" 중복확인 ")]),_:1})])]),_:1},8,["focused","color","readonly","messages","error-messages","modelValue"]),o(g,{variant:"outlined",focused:s(e).isRegisterPwCheck,color:s(e).isRegisterPwCheck?"success":"",placeholder:"최소 8자리 이상",class:"mt-2",disabled:!s(e).isRegisterIdCheck,clearable:"",modelValue:s(e).registerPassword,"onUpdate:modelValue":r[6]||(r[6]=t=>s(e).registerPassword=t),label:"비밀번호",type:"password",density:"compact"},null,8,["focused","color","disabled","modelValue"]),o(g,{variant:"outlined",color:s(e).isRegisterPwCheck?"success":"","error-messages":s(e).registerPwErrMsg,messages:s(e).registerPwPassMsg,class:"mt-2",disabled:!s(e).isRegisterIdCheck||s(e).registerPassword.length<=7,modelValue:s(e).registerCheckPassword,"onUpdate:modelValue":r[7]||(r[7]=t=>s(e).registerCheckPassword=t),type:"password",label:"비밀번호 확인",density:"compact"},null,8,["color","error-messages","messages","disabled","modelValue"]),o(u,{onClick:C,disabled:!s(e).isRegisterIdCheck||!s(e).isRegisterPwCheck,color:"primary",type:"submit",class:"mt-2",height:"45",density:"compact",style:{width:"100%"}},{default:a(()=>[n(" 회원가입 ")]),_:1},8,["disabled"]),o(u,{onClick:r[8]||(r[8]=t=>("$reset"in i?i.$reset:s(U))(s(e),f)),color:"grey",class:"mt-2",height:"48",density:"compact",style:{width:"100%"}},{default:a(()=>[n(" 취소 ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]))}},pe=M(te,[["__scopeId","data-v-1f984f8c"]]);export{pe as default};
