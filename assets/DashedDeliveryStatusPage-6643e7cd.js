import{C as rt,_ as it,a as at,b as dt,c as ut}from"./FallbackCallout-a18565fc.js";import{l as i,am as g,_ as et,$ as st,c as J,q as b,y as D,e as t,p as ct,ar as pt,K as _t,M as ht,g as ft,N as gt,O as bt,as as yt,Q as mt,S as vt,u as St,w as Ct,d as Dt,m as xt,k as Lt,o as kt,a1 as Tt,t as e,D as q,B as R,x as y,A as S,v as l,C as G,V as L,F as It,an as Ut,ak as H,E as At,G as Nt}from"./index-a104d20c.js";import"./user.svc-24c3e478.js";import{d as W}from"./dataset.Svc-c38d2df9.js";import{a as w,V as C}from"./VRow-6ff96d89.js";import{V as k,b as T,a as I}from"./VCard-99e97b00.js";import{V as Q,a as V}from"./VTabs-5940cefa.js";import"./VSlideGroup-5e7392b5.js";const Rt={__name:"DoughnutChart",props:{chartData:{type:Object,default:{}},useLegend:{type:Boolean,default:!0},position:{type:String,default:"top"},dataLabelAnchor:{type:String,default:"center"},dataLabelAlign:{type:String,default:"center"},dataLabelFontSize:{type:String,default:"15"},dataLabelWeight:{type:String,default:"normal"},dataLabelColor:{type:String,default:"black"}},setup(n){const r=n;rt.defaults.set("plugins.datalabels",{color:"#FFFFFF",display:r.useDataLabel,color:r.dataLabelColor,font:{size:r.dataLabelFontSize,weight:r.dataLabelWeight},anchor:r.dataLabelAnchor,align:r.dataLabelAlign});const c={responsive:!0,plugins:{legend:{align:"start",labels:{boxWidth:10,boxHeight:10,usePointStyle:!1,pointStyleWidth:40,useBorderRadius:!0,borderRadius:10,font:{size:"17px"}},display:r.useLegend,position:r.position},labels:{padding:10,boxWidth:10,color:"#000",font:{family:"Noto Sans KR"}}}};return(A,P)=>{const N=it;return i(),g(N,{"chart-data":r.chartData,"chart-type":"doughnut","chart-options":c},null,8,["chart-data"])}}};const wt={class:"wrapper"},Vt={class:"right-wrap"},Ot={__name:"DeliveryStatusPipe",props:{compName:{type:String},title:{type:String},data:{type:{},default:{AA:0,AM:0,GO:0,WH:0}},color:{type:String,default:"primary"}},setup(n){const r={},c=n;return st(r),J(()=>Object.values(c.data).every(A=>A===0)),(A,P)=>{const N=at;return i(),b("div",wt,[D("div",Vt,[t(N,{"y-scale-font-size":17,"y-scale-weight":"bold",style:{height:"271.5px",width:"100%"},"use-xscale":!1,"chart-data":c.data,"index-axis":"y","data-auto-form":!0,"use-legend":!1},null,8,["chart-data"])])])}}},Mt=et(Ot,[["__scopeId","data-v-5088a440"]]),U=""+new URL("ico-nodata-empty-11473e15.svg",import.meta.url).href;const Ft={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Et(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${n}`]},[r])}function X(n){const[r,c]=n.split("@");return Array.from({length:c}).map(()=>K(r))}function K(n){let r=[];if(!n)return r;const c=Ft[n];if(n!==c){if(n.includes(","))return Z(n);if(n.includes("@"))return X(n);c.includes(",")?r=Z(c):c.includes("@")?r=X(c):c&&r.push(K(c))}return[Et(n,r)]}function Z(n){return n.replace(/\s/g,"").split(",").map(K)}const Bt=ct({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...pt(),..._t(),...ht()},"VSkeletonLoader"),tt=ft()({name:"VSkeletonLoader",props:Bt(),setup(n,r){let{slots:c}=r;const{backgroundColorClasses:A,backgroundColorStyles:P}=gt(bt(n,"color")),{dimensionStyles:N}=yt(n),{elevationClasses:a}=mt(n),{themeClasses:M}=vt(n),{t:F}=St(),x=J(()=>K(Ct(n.type).join(",")));return Dt(()=>{var $;const E=!c.default||n.loading,j=n.boilerplate||!E?{}:{ariaLive:"polite",ariaLabel:F(n.loadingText),role:"alert"};return t("div",xt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":n.boilerplate},M.value,A.value,a.value],style:[P.value,E?N.value:{}]},j),[E?x.value:($=c.default)==null?void 0:$.call(c)])}),{}}}),O=n=>(At("data-v-cb5cf4f3"),n=n(),Nt(),n),Pt=O(()=>D("p",{class:"d-flex align-center"}," 납품 현황 ",-1)),$t={key:1},Wt={key:1},Kt=O(()=>D("p",{class:"d-flex align-center"}," 반품 현황 ",-1)),jt={key:1},zt={key:1},Gt={key:0,style:{opacity:"0.5"}},Ht={class:"subsys-cnt-container"},Jt={class:"subsys-item"},Yt={key:0,style:{"font-size":"28px","font-weight":"bold",color:"#FF5733"}},qt={key:1,style:{"font-size":"28px","font-weight":"bold"}},Qt={key:2,style:{"font-size":"15px",color:"#FF5733"}},Xt={key:3,style:{"font-size":"15px"}},Zt=O(()=>D("p",null,"납품 분포 현황",-1)),ta=O(()=>D("p",null,"목표 납품 현황",-1)),aa=O(()=>D("p",null,"총합 현황",-1)),ea=O(()=>D("p",null,"월별 납품 추이",-1)),sa={__name:"DashedDeliveryStatusPage",setup(n){const{getSecretSession:r,setSecretSession:c,getDeviceInfo:A,showAlert:P}=Lt(),a=st({poStatusCntList:[],poSubSysList:[],subSysChartData:{},stackChartData:{},poStatusDeliveryList:[],poStatusReturnList:[],totalDeliveryCnt:0,totalReturnCnt:0,lineChartData:null,isPoStatusDeliveryList:!1,totalAndFinishedDataChartList:[],totalAndFinishedSumChartData:{},deliveryTab:"1",returnTab:"1",dashWindow:!1,isDetailDialog:!1,poDocumentDetail:{}});let M,F;const x=["#A8DADC","#457B9D","#A1C181","#6D6875","#2A9D8F","#C9CBA3","#BFD3C1","#A5A5AF","#8DA6A6"],E=J(()=>a.poSubSysList.reduce((p,o)=>p+(o.count||0),0));function j(p){const o=["납품확인","납품접수","납품완료","반품확인","반품접수","반품완료"],f=Object.keys(p[o[0]]).map((_,s)=>({label:_,data:o.map(u=>{var h;return((h=p[u])==null?void 0:h[_])||null}),backgroundColor:x[s]+"80",borderColor:x[s]+"CC",fill:!1,tension:.1,borderRadius:{topLeft:4,topRight:4,bottomLeft:0,bottomRight:0}}));return{labels:o,datasets:f}}function $(p){const o=[],f=[],_=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];return p.forEach((s,u)=>{const h=[parseInt(s.M01_COUNT)||0,parseInt(s.M02_COUNT)||0,parseInt(s.M03_COUNT)||0,parseInt(s.M04_COUNT)||0,parseInt(s.M05_COUNT)||0,parseInt(s.M06_COUNT)||0,parseInt(s.M07_COUNT)||0,parseInt(s.M08_COUNT)||0,parseInt(s.M09_COUNT)||0,parseInt(s.M10_COUNT)||0,parseInt(s.M11_COUNT)||0,parseInt(s.M12_COUNT)||0],d=[parseInt(s.M01_RETURN_COUNT)||0,parseInt(s.M02_RETURN_COUNT)||0,parseInt(s.M03_RETURN_COUNT)||0,parseInt(s.M04_RETURN_COUNT)||0,parseInt(s.M05_RETURN_COUNT)||0,parseInt(s.M06_RETURN_COUNT)||0,parseInt(s.M07_RETURN_COUNT)||0,parseInt(s.M08_RETURN_COUNT)||0,parseInt(s.M09_RETURN_COUNT)||0,parseInt(s.M10_RETURN_COUNT)||0,parseInt(s.M11_RETURN_COUNT)||0,parseInt(s.M12_RETURN_COUNT)||0];o.push({label:`${s.PROJECT_USAGE} 납품`,data:h,borderColor:`hsl(${u*30+200}, 70%, 50%)`,backgroundColor:`hsl(${u*30+200}, 70%, 50%,0.5)`,fill:!1}),f.push({label:`${s.PROJECT_USAGE} 반품`,data:d,borderColor:`hsl(${u*30}, 70%, 50%)`,backgroundColor:`hsl(${u*30}, 70%, 50%,0.5)`,fill:!1})}),{labels:_,datasets:[...o,...f]}}function lt(){const p=r("usage");W.getUsageList(p).then(o=>{o&&(a.lineChartData=$(o.data))})}function nt(){a.isPoStatusDeliveryList=!0;const p=r("project"),o=r("date"),f=r("usage"),_={projectName:p,startDate:o.start,endDate:o.end,poUsageList:f};W.getSysDivisionCntForPoStatus(_).then(s=>{if(s!=null&&s.data){const u=Object.values(s.data);a.poStatusDeliveryList=u.slice(0,3),a.poStatusReturnList=u.slice(3),a.poStatusCntList=s.data;const h=j(a.poStatusCntList);a.stackChartData=h,a.totalDeliveryCnt=a.poStatusDeliveryList.reduce((d,v)=>d+Object.values(v).reduce((B,m)=>B+m,0),0),a.totalReturnCnt=a.poStatusReturnList.reduce((d,v)=>d+Object.values(v).reduce((B,m)=>B+m,0),0),s!=null&&s.error,a.isPoStatusDeliveryList=!1}}),W.getSubSysDivisionCnt(_).then(s=>{s!=null&&s.data&&(a.poSubSysList=s.data,a.subSysChartData={labels:a.poSubSysList.map(u=>u.SUBSYS_NAME),datasets:[{label:"값",data:a.poSubSysList.map(u=>u.count),fill:!1,backgroundColor:a.poSubSysList.map((u,h)=>x[h%x.length]+"80"),borderColor:a.poSubSysList.map((u,h)=>x[h%x.length]+"CC"),borderRadius:2}]})}),W.getTotalNFinishedDateChartData(_).then(s=>{if(console.log(s),s){const u=Object.keys(s.data),h=u.map(m=>s.data[m].total),d=u.map(m=>s.data[m].finished),v=h.reduce((m,z)=>m+z,0),B=d.reduce((m,z)=>m+z,0);a.totalAndFinishedSumChartData={labels:["총합"],datasets:[{label:"목표 총합",data:[v],backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"완료 총합",data:[B],backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},a.totalAndFinishedDataChartList={labels:u,datasets:[{label:"목표",data:h,backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"완료",data:d,backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}}})}function Y(p){p==="delivery"?clearInterval(M):p==="return"&&clearInterval(F)}function ot(){M=setInterval(()=>{a.deliveryTab=(parseInt(a.deliveryTab)%3+1).toString()},6e3),F=setInterval(()=>{a.returnTab=(parseInt(a.returnTab)%3+1).toString()},6e3)}return kt(()=>{lt(),nt(),ot()}),Tt(()=>{clearInterval(M),clearInterval(F)}),(p,o)=>{const f=dt,_=Mt,s=Rt,u=at,h=ut;return i(),b("div",{class:q(["overflow-auto pt-6",{"px-15":p.$vuetify.display.mdAndUp}])},[t(w,{class:"dash-layout-wrapper"},{default:e(()=>[t(C,{cols:"12",lg:"3",class:"layout-left"},{default:e(()=>[t(w,null,{default:e(()=>[t(C,null,{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[Pt,t(R,null,{default:e(()=>[y("mdi-package-variant")]),_:1})]),_:1}),t(S),t(I,{class:"card-text pt-0 px-0"},{default:e(()=>[l(a).isPoStatusDeliveryList?(i(),g(tt,{key:0,style:{height:"117px"},type:"list-item-three-line"})):(i(),b("div",$t,[l(a).poSubSysList.length<=0?(i(),g(f,{key:0,iconSrc:l(U),message:"납품현황 정보가 없습니다.",hairlines:!1,spacing:"95px"},null,8,["iconSrc","message"])):(i(),b("div",Wt,[t(Q,{onClick:o[0]||(o[0]=d=>Y("delivery")),color:"primary","fixed-tabs":"",modelValue:l(a).deliveryTab,"onUpdate:modelValue":o[1]||(o[1]=d=>l(a).deliveryTab=d),density:"compact"},{default:e(()=>[t(V,{width:"110px",value:"1"},{default:e(()=>[y("납품확인(넥스원)")]),_:1}),t(V,{width:"110px",value:"2"},{default:e(()=>[y("납품접수(KAI)")]),_:1}),t(V,{width:"110px",value:"3"},{default:e(()=>[y("납품완료(KAI)")]),_:1})]),_:1},8,["modelValue"]),t(S,{class:"mb-4"}),t(G,{style:{"min-width":"354px"},modelValue:l(a).deliveryTab,"onUpdate:modelValue":o[2]||(o[2]=d=>l(a).deliveryTab=d),class:"mx-4"},{default:e(()=>[t(L,{value:"1"},{default:e(()=>[t(_,{data:l(a).poStatusDeliveryList[0],title:"납품접수","comp-name":"KAI"},null,8,["data"])]),_:1}),t(L,{value:"2"},{default:e(()=>[t(_,{data:l(a).poStatusDeliveryList[1],title:"납품접수","comp-name":"KAI"},null,8,["data"])]),_:1}),t(L,{value:"3"},{default:e(()=>[t(_,{data:l(a).poStatusDeliveryList[2],title:"납품완료","comp-name":"KAI"},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]))]))]),_:1})]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(C,null,{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[Kt,t(R,null,{default:e(()=>[y("mdi-rotate-left")]),_:1})]),_:1}),t(S),t(I,{class:"card-text px-0 pt-0"},{default:e(()=>[l(a).isPoStatusDeliveryList?(i(),g(tt,{key:0,style:{height:"120px"},type:"list-item-three-line"})):(i(),b("div",jt,[l(a).poSubSysList.length<=0?(i(),g(f,{key:0,iconSrc:l(U),message:"반품현황 정보가 없습니다.",hairlines:!1,spacing:"95px"},null,8,["iconSrc","message"])):(i(),b("div",zt,[t(Q,{onClick:o[3]||(o[3]=d=>Y("return")),color:"primary","fixed-tabs":"",modelValue:l(a).returnTab,"onUpdate:modelValue":o[4]||(o[4]=d=>l(a).returnTab=d),density:"compact"},{default:e(()=>[t(V,{width:"110px",value:"1"},{default:e(()=>[y("반품확인(KAI) ")]),_:1}),t(V,{width:"110px",value:"2"},{default:e(()=>[y("반품접수(KAI)")]),_:1}),t(V,{width:"110px",value:"3"},{default:e(()=>[y("반품완료(KAI)")]),_:1})]),_:1},8,["modelValue"]),t(S,{class:"mb-4"}),t(G,{style:{"min-width":"354px"},class:"mx-4 pb-0",modelValue:l(a).returnTab,"onUpdate:modelValue":o[5]||(o[5]=d=>l(a).returnTab=d)},{default:e(()=>[t(L,{value:"1"},{default:e(()=>[t(_,{color:"warning",data:l(a).poStatusReturnList[0],title:"반품확인","comp-name":"넥스원"},null,8,["data"])]),_:1}),t(L,{value:"2"},{default:e(()=>[t(_,{color:"warning",data:l(a).poStatusReturnList[1],title:"반품접수","comp-name":"KAI"},null,8,["data"])]),_:1}),t(L,{value:"3"},{default:e(()=>[t(_,{color:"warning",data:l(a).poStatusReturnList[2],title:"반품완료","comp-name":"KAI"},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]))]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(C,{cols:"12",lg:"9",class:"layout-right"},{default:e(()=>[t(w,{dense:""},{default:e(()=>[t(C,{cols:"12"},{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[y(" 부체계별 납품 완료 건수 "),t(R,null,{default:e(()=>[y("mdi-store-check-outline")]),_:1})]),_:1}),t(S),t(I,{class:"card-text pa-1"},{default:e(()=>[l(a).poSubSysList.length<=0?(i(),b("p",Gt," 현재 기준일에 해당하는 납품건수가 존재하지 않습니다. ")):(i(),b("div",{key:1,class:q([{"":p.$vuetify.display.mdAndDown},"status d-flex"]),style:{"flex-wrap":"wrap"}},[(i(!0),b(It,null,Ut(l(a).poSubSysList,(d,v)=>(i(),b("div",{key:v,class:"d-flex align-center"},[D("div",Ht,[D("div",Jt,[l(a).poSubSysList.length===v+1?(i(),b("p",Yt,H(l(E)),1)):(i(),b("p",qt,H(String(d.count).length>1?d.count:"0"+d.count),1)),l(a).poSubSysList.length===v+1?(i(),b("p",Qt," Total ")):(i(),b("p",Xt,H(d.SUBSYS_NAME),1))])])]))),128))],2))]),_:1})]),_:1})]),_:1})]),_:1}),t(G,{class:"mt-6",modelValue:l(a).dashWindow,"onUpdate:modelValue":o[6]||(o[6]=d=>l(a).dashWindow=d)},{default:e(()=>[t(L,{value:!1},{default:e(()=>[t(w,null,{default:e(()=>[t(C,{cols:"12",lg:"4"},{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[Zt,t(R,null,{default:e(()=>[y("mdi-calendar-month")]),_:1})]),_:1}),t(S),t(I,{class:"card-text"},{default:e(()=>[l(a).poSubSysList.length<=0?(i(),g(f,{key:0,iconSrc:l(U),message:"월별 현황 정보가 없습니다.",hairlines:!1,spacing:"65px"},null,8,["iconSrc","message"])):l(a).subSysChartData?(i(),g(s,{key:1,style:{height:"220px"},position:"bottom","chart-data":l(a).subSysChartData},null,8,["chart-data"])):(i(),g(f,{key:2,iconSrc:l(U),message:"데이터가 존재하지 않습니다.",hairlines:!1,spacing:"96px"},null,8,["iconSrc","message"]))]),_:1})]),_:1})]),_:1}),t(C,{cols:"12",lg:"6"},{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[ta,t(R,null,{default:e(()=>[y("mdi-flag-checkered")]),_:1})]),_:1}),t(S),t(I,{class:"card-text"},{default:e(()=>[l(a).totalAndFinishedDataChartList?(i(),g(u,{key:0,style:{height:"220px"},"use-yscale":!1,position:"top","chart-data":l(a).totalAndFinishedDataChartList},null,8,["chart-data"])):(i(),g(f,{key:1,iconSrc:l(U),message:"목표 납품 현황 정보가 없습니다.",hairlines:!1,spacing:"96px"},null,8,["iconSrc","message"]))]),_:1})]),_:1})]),_:1}),t(C,{cols:"12",lg:"2"},{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[aa]),_:1}),t(S),t(I,{class:"card-text"},{default:e(()=>[l(a).totalAndFinishedSumChartData?(i(),g(u,{key:0,"use-yscale":!1,style:{height:"220px"},position:"top","chart-data":l(a).totalAndFinishedSumChartData},null,8,["chart-data"])):(i(),g(f,{key:1,iconSrc:l(U),message:"데이터가 존재하지 않습니다.",hairlines:!1,spacing:"96px"},null,8,["iconSrc","message"]))]),_:1})]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(C,null,{default:e(()=>[t(k,{class:"card",variant:"outlined"},{default:e(()=>[t(T,{class:"card-title"},{default:e(()=>[ea,t(R,null,{default:e(()=>[y("mdi-chart-line")]),_:1})]),_:1}),t(S),t(I,{class:"card-text"},{default:e(()=>[l(a).lineChartData!==null?(i(),g(h,{key:0,style:{"max-height":"251px",height:"251px","min-height":"251px"},"chart-data":l(a).lineChartData},null,8,["chart-data"])):(i(),g(f,{key:1,iconSrc:l(U),message:"데이터가 존재하지 않습니다.",hairlines:!1,spacing:"71px"},null,8,["iconSrc","message"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{value:!0})]),_:1},8,["modelValue"])]),_:1})]),_:1})],2)}}},pa=et(sa,[["__scopeId","data-v-cb5cf4f3"]]);export{pa as default};
